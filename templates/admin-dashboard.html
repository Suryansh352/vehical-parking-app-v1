<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Dashboard</title>
        <link rel="stylesheet" href="/static/style.css">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
        <style>
            #form-body{
                margin-top: 100px;
            }
        </style>    
    </head>
    <body>
      {% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    {% for category, msg in messages %}
      <div class="alert alert-{{ category }}">
        {{ msg }}
      </div>
    {% endfor %}
  {% endif %}
{% endwith %}

        <div id="main">
            <div id="canvas">
                <nav class="navbar navbar-expand-lg navbar-light bg-light">
  <div class="container-fluid">
    <a class="navbar-brand" href="#">Welcome Admin!</a>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item">
          <a class="nav-link active" aria-current="page" href="/login">Logout</a>
        </li>
                  <li class="nav-item">
          <a class="nav-link active" aria-current="page" href="{{ url_for('admin_summary') }}">Summary</a>
        </li>
                  <li class="nav-item">
          <a href="{{ url_for('admin_view_users') }}" class="nav-link active">Users</a>
        </li>
      </ul>
      <form class="d-flex">
        <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
        <button class="btn btn-outline-success" type="submit">Search</button>
      </form>
    </div>
  </div>
</nav>
<div id="content" >
<h3 style="text-align: center; border: 2px solid black; padding: 10px; border-radius: 10px;">
    Parking slots by Lot
</h3>

{% for lot in parking_lots %}
  <div>
    <h4>{{ lot.prime_location_name }}</h4>
    <div class="d-flex justify-content-around">
      {% for spot in lot.spots %}
<div class="card" style="width: 12rem;">
  <h5>Spot ID: {{ spot.id }}</h5>
  <p>Status: {% if spot.status == 'A' %}Available{% else %}Occupied{% endif %}</p>
  
<form method="POST" action="{{ url_for('delete_lot', lot_id=lot.id) }}" style="display:inline;">
    <button type="submit" class="btn btn-danger btn-sm"
        onclick="return confirm('Are you sure you want to delete this parking lot?');">
        Delete
    </button>
</form>



<form method="GET" action="{{ url_for('edit_lot', lot_id=lot.id) }}" style="display:inline;">
  <button type="submit" class="btn btn-primary btn-sm mt-2">Edit</button>
</form>

</div>
      {% else %}
        <p>No parking spots for this lot.</p>
      {% endfor %}
    </div>
  </div>
  <hr>
{% endfor %}

</div>
<div class="text-center mx-2 my-5">
  <a href="/create" class="btn btn-primary">+ Add Slot</a>
</div>


    </body>
</html>